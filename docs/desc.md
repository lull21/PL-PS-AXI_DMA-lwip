
## 核心模块说明

### 1. AXI DMA控制器 (`axi_dma_controller`)
- 实现S2MM(Stream to Memory Map)模式DMA传输
- 环形缓冲管理，支持多段轮转
- 中断和轮询两种工作模式
- 错误检测和状态监控

### 2. TCP性能服务器 (`tcp_perf_server`)  
- 基于lwIP的TCP服务器实现
- 性能统计和带宽报告功能
- 支持IPv4/IPv6双协议栈
- 默认监听端口: 5001

### 3. 平台抽象层 (`platform_*`)
- 提供跨平台硬件抽象接口
- 定时器管理
- 中断控制器配置
- 外设初始化

### 4. SPI控制器 (`spi_ctrl`)
- 支持LMK01010时钟芯片配置
- 支持LMK2594时钟芯片配置
- 通用SPI读写接口

## 编译和部署

### 环境要求
- Xilinx Vitis/Vivado SDK 2019.1或更高版本
- 支持的硬件平台:
  - Zynq-7000系列开发板
  - Zynq UltraScale+系列开发板

### 编译步骤
1. 在Vitis/Vivado SDK中创建新的应用项目
2. 导入所有源文件到项目
3. 配置正确的板级支持包(BSP)
4. 设置编译选项和目标平台
5. 编译生成可执行文件

### 部署流程
1. 将生成的ELF文件下载到目标板
2. 通过串口终端监控系统启动
3. 配置网络连接参数
4. 启动TCP客户端进行数据传输测试

## 配置参数

### 网络配置
```c
#define DEFAULT_IP_ADDRESS    "192.168.1.10"    // 默认IP地址
#define DEFAULT_IP_MASK       "255.255.255.0"   // 子网掩码  
#define DEFAULT_GW_ADDRESS    "192.168.1.1"     // 网关地址
#define TCP_CONN_PORT         5001              // TCP监听端口
```

### DMA缓冲配置
```c
#define DMA_BUFFER_BASE       0x10000000U       // DDR缓冲起始地址
#define DMA_SEGMENT_SIZE      (256 * 1024U)     // 每段大小256KB
#define DMA_RING_SEGMENTS     16U               // 环形缓冲段数
```

## 使用示例

### 基本工作流程
1. 系统初始化: 平台硬件和网络栈
2. DMA启动: 开始从PL采集数据到DDR
3. TCP服务器: 监听客户端连接
4. 数据传输: 将DDR中的数据通过TCP发送
5. 性能监控: 实时统计传输带宽

### 性能测试
系统支持性能测试模式，可以通过TCP客户端发送特定命令来:
- 测量传输带宽
- 生成性能报告
- 监控系统状态

## 故障排除

### 常见问题
1. **DMA初始化失败**: 检查硬件连接和地址映射
2. **网络连接失败**: 验证IP配置和物理连接
3. **数据传输中断**: 检查缓冲溢出和网络状况

### 调试支持
- 串口调试输出
- 状态寄存器查询
- 性能统计信息

## 许可证

本项目基于Xilinx开源许可证，具体参见各源文件头部的版权声明。

## 技术支持

有关技术问题和功能需求，请参考项目文档或联系开发团队。

---

*最后更新: 2025年11月*
